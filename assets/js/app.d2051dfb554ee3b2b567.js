!function(e){function t(t){for(var r,c,i=t[0],s=t[1],l=t[2],d=0,m=[];d<i.length;d++)c=i[d],Object.prototype.hasOwnProperty.call(n,c)&&n[c]&&m.push(n[c][0]),n[c]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(u&&u(t);m.length;)m.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],r=!0,i=1;i<a.length;i++){var s=a[i];0!==n[s]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=a[0]))}return e}var r={},n={0:0},o=[];function c(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=e,c.c=r,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(a,r,function(t){return e[t]}.bind(null,r));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="./";var i=window.webpackJsonp=window.webpackJsonp||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=s;o.push([51,1]),a()}({22:function(e,t,a){var r=a(23),n=a(24);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1};r(n,o);e.exports=n.locals||{}},24:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);a(22);var r=a(0),n=a.n(r),o=a(4),c=a.n(o),i=a(1),s=a.n(i);const l=Object(r.forwardRef)((e,t)=>{const{className:a,startCount:o=1,onChange:c}=e,[i,s]=Object(r.useState)(o);Object(r.useEffect)(()=>{c&&c(i)},[i]),Object(r.useEffect)(()=>{i!==o&&s(o)},[o]);return n.a.createElement("div",{className:"cart-count "+a},n.a.createElement("button",{onClick:()=>{i>1&&s(e=>e-1)},className:"cart-count__button",type:"button"},"-"),n.a.createElement("input",{onChange:e=>{const t=+e.target.value;s(t>0?t:1)},ref:t,type:"number",className:"cart-count__value",value:i,min:"1","aria-label":"Количество"}),n.a.createElement("button",{onClick:()=>{s(e=>e+1)},className:"cart-count__button",type:"button"},"+"))});l.displayName="Counter",l.propTypes={className:s.a.string.isRequired,startCount:s.a.number,onChange:s.a.func};var u=l;const d=e=>{const{goods:t,onDeleteButtonClick:a,onCounterChange:o}=e,{id:c,name:i,price:s,count:l,picture:d}=t,m=Object(r.useRef)(null),p=1===l?s:s*l;return n.a.createElement("li",{className:"cart__item"},n.a.createElement("img",{src:d,alt:i,className:"cart__picture",width:"100",height:"100"}),n.a.createElement("div",{className:"cart__info"},n.a.createElement("div",{className:"cart__row cart-row"},n.a.createElement("h3",{className:"cart__title"},n.a.createElement("a",{href:"#",className:"cart__link"},i)),n.a.createElement("div",{className:"cart__price-wrapper"},n.a.createElement("p",{className:"cart__price-total"},p.toLocaleString()," ₽"),l>1&&n.a.createElement("p",{className:"cart__price"},l.toLocaleString()," x ",s.toLocaleString()," ₽"))),n.a.createElement("div",{className:"cart__row cart-row"},n.a.createElement("button",{onClick:()=>a(c),className:"cart__delete cart-button  cart-button--in-text",type:"button"},"Удалить"),n.a.createElement(u,{ref:m,className:"cart__count-wrapper cart-row",startCount:l,onChange:e=>o(c,e)}))))};d.propTypes={goods:s.a.arrayOf(s.a.shape({id:s.a.string.isRequired,name:s.a.string.isRequired,price:s.a.number.isRequired,picture:s.a.string.isRequired,count:s.a.number.isRequired})).isRequired,onDeleteButtonClick:s.a.func.isRequired,onCounterChange:s.a.func.isRequired};var m=d;const p=e=>{const{allGoods:t,onFormSubmit:a}=e,o=Object(r.useRef)(null),c=Object(r.useRef)(null);return n.a.createElement("section",{className:"cart-addition container"},n.a.createElement("h2",{className:"cart-addition__title"},"Добавить товар"),n.a.createElement("form",{onSubmit:e=>{e.preventDefault(),a(c.current.value,+o.current.value)},action:"#",className:"cart-addition__form"},n.a.createElement("select",{ref:c,className:"cart-addition__select","aria-label":"Выбрать товар из списка"},t.map(e=>n.a.createElement("option",{key:e.id,value:e.id},e.name))),n.a.createElement(u,{ref:o,className:"cart-addition__count-wrapper"}),n.a.createElement("button",{className:"cart-addition__add cart-button cart-button--attention",type:"submit"},"Добавить")))};p.propTypes={allGoods:s.a.arrayOf(s.a.shape({id:s.a.string.isRequired,name:s.a.string.isRequired,price:s.a.number.isRequired,picture:s.a.string.isRequired})).isRequired,onFormSubmit:s.a.func.isRequired};var b=p,f=a(5);const _=(...e)=>Object.assign({},...e),G=[{id:"1",name:"Видеокарта GIGABYTE GeForce GTX 1050 Ti OC 4G",price:12690,picture:"https://img.mvideo.ru/Pdb/30031080m.jpg"},{id:"2",name:"Видеокарта GIGABYTE GV-N2060WF2OC-6GD V2",price:29490,picture:"https://img.mvideo.ru/Pdb/30052540m.jpg"},{id:"3",name:"Видеокарта GIGABYTE GeForce RTX 2080 WINDFORCE OC 8G",price:5e4,picture:"https://img.mvideo.ru/Pdb/30040867m.jpg"},{id:"4",name:"Видеокарта Palit GeForce GT 710 2GB DDR3 Silent",price:1e4,picture:"https://img.mvideo.ru/Pdb/30030965m.jpg"},{id:"5",name:"Видеокарта GIGABYTE GeForce GTX 1080 TI WaterforceWB Xtreme Edition 1",price:25e3,picture:"https://img.mvideo.ru/Pdb/30031081m.jpg"}],E={allGoods:[],selectedGoods:[]},g={LOAD_GOODS:"LOAD_GOODS",CHANGE_SELECTED_GOODS:"CHANGE_SELECTED_GOODS"},O=e=>({type:g.LOAD_GOODS,payload:e}),h=e=>({type:g.CHANGE_SELECTED_GOODS,payload:e}),v=()=>(e,t,a)=>{e(O(G))},y=(e=E,t)=>{switch(t.type){case g.LOAD_GOODS:return _(e,{allGoods:t.payload});case g.CHANGE_SELECTED_GOODS:return _(e,{selectedGoods:t.payload})}return e},N={GOODS:["товар","товара","товаров"]},R=e=>{const{allGoods:t,selectedGoods:a,countGoods:r,totalGoods:o,addGoods:c,deleteGoods:i,changeGoodsCount:s,onFormSubmit:l}=e,u=((e,t)=>{const a=(e=Math.abs(e)%100)%10;return e>10&&e<20?t[2]:a>1&&a<5?t[1]:1===a?t[0]:t[2]})(r,N.GOODS);return n.a.createElement(n.a.Fragment,null,n.a.createElement(b,{allGoods:t,onFormSubmit:c}),n.a.createElement("section",{className:"cart container"},n.a.createElement("h2",{className:"visually-hidden"},"Товары в корзине"),n.a.createElement("form",{className:"cart__form",onSubmit:l},n.a.createElement("ul",{className:"cart__list"},a.map(e=>n.a.createElement(m,{key:e.id,goods:e,onDeleteButtonClick:i,onCounterChange:s}))),n.a.createElement("div",{className:"cart__total"},n.a.createElement("div",{className:"cart__row cart__total-row cart-row"},n.a.createElement("p",{className:"cart__total-count"},"В корзине ",r.toLocaleString()," ",u),n.a.createElement("p",{className:"cart__total-price"},o.toLocaleString()," ₽")),n.a.createElement("button",{className:"cart__submit cart-button cart-button--attention",type:"submit",disabled:0===r},"Продолжить оформление")))))};R.propTypes={allGoods:s.a.arrayOf(s.a.shape({id:s.a.string.isRequired,name:s.a.string.isRequired,price:s.a.number.isRequired,picture:s.a.string.isRequired})).isRequired,selectedGoods:s.a.arrayOf(s.a.shape({id:s.a.string.isRequired,name:s.a.string.isRequired,price:s.a.number.isRequired,picture:s.a.string.isRequired,count:s.a.number.isRequired})).isRequired,countGoods:s.a.number.isRequired,totalGoods:s.a.number.isRequired,addGoods:s.a.func.isRequired,deleteGoods:s.a.func.isRequired,changeGoodsCount:s.a.func.isRequired,onFormSubmit:s.a.func.isRequired};var S=Object(f.b)(e=>({allGoods:e.allGoods,selectedGoods:e.selectedGoods,countGoods:e.selectedGoods.reduce((e,t)=>e+t.count,0),totalGoods:e.selectedGoods.reduce((e,t)=>e+t.price*t.count,0)}),null,(e,t,a)=>{const{allGoods:r,selectedGoods:n}=e,{dispatch:o}=t,c=n.slice().reverse();return _(e,t,a,{selectedGoods:c,addGoods:(e,t)=>{let a=[];const c=n.findIndex(t=>t.id===e);if(-1===c){const o=r.find(t=>t.id===e);a=n.slice(),a.push((s=t,{id:(i=o).id,name:i.name,price:i.price,picture:i.picture,count:s}))}else{const e=n[c],r=_(e,{count:e.count+t});a=[...n.slice(0,c),r,...n.slice(c+1)]}var i,s;o(h(a))},deleteGoods:e=>{const t=n.findIndex(t=>t.id===e),a=[...n.slice(0,t),...n.slice(t+1)];o(h(a))},changeGoodsCount:(e,t)=>{const a=n.findIndex(t=>t.id===e),r=_(n[a],{count:t}),c=[...n.slice(0,a),r,...n.slice(a+1)];o(h(c))}})})(R),C=a(19),q=a.n(C);var j=a(3),D=a(20),w=a(21);(()=>{const e=(()=>{const e=q.a.create({baseURL:"http://zjdog.mocklab.io",timeout:5e3});return e.interceptors.response.use(e=>e,e=>{throw e}),e})(),t=Object(j.createStore)(y,Object(D.composeWithDevTools)(Object(j.applyMiddleware)(w.a.withExtraArgument(e))));t.dispatch(v()),c.a.render(n.a.createElement(f.a,{store:t},n.a.createElement(S,{onFormSubmit:()=>{}})),document.querySelector("#root"))})()}});