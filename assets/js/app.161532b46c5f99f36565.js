!function(e){function t(t){for(var r,c,i=t[0],s=t[1],u=t[2],d=0,m=[];d<i.length;d++)c=i[d],Object.prototype.hasOwnProperty.call(n,c)&&n[c]&&m.push(n[c][0]),n[c]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(l&&l(t);m.length;)m.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],r=!0,i=1;i<a.length;i++){var s=a[i];0!==n[s]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=a[0]))}return e}var r={},n={0:0},o=[];function c(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=e,c.c=r,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(a,r,function(t){return e[t]}.bind(null,r));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="./";var i=window.webpackJsonp=window.webpackJsonp||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=s;o.push([52,1]),a()}({23:function(e,t,a){var r=a(24),n=a(25);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1};r(n,o);e.exports=n.locals||{}},25:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);a(23);var r=a(0),n=a.n(r),o=a(5),c=a.n(o),i=a(1),s=a.n(i);const u=Object(r.forwardRef)((e,t)=>{const{className:a,startCount:o=1,onChange:c}=e,[i,s]=Object(r.useState)(o);Object(r.useEffect)(()=>{c&&c(i)},[i]),Object(r.useEffect)(()=>{i!==o&&s(o)},[o]);return n.a.createElement("div",{className:"cart-count "+a},n.a.createElement("button",{onClick:()=>{i>1&&s(e=>e-1)},className:"cart-count__button",type:"button"},"-"),n.a.createElement("input",{onChange:e=>{const t=+e.target.value;s(t>0?t:1)},ref:t,type:"number",className:"cart-count__value",value:i,min:"1","aria-label":"Количество"}),n.a.createElement("button",{onClick:()=>{s(e=>e+1)},className:"cart-count__button",type:"button"},"+"))});u.displayName="Counter",u.propTypes={className:s.a.string.isRequired,startCount:s.a.number,onChange:s.a.func};var l=u;const d=e=>{const{goods:t,onDeleteButtonClick:a,onCounterChange:o}=e,{id:c,name:i,price:s,quantity:u,picture:d}=t,m=Object(r.useRef)(null),p=1===u?s:s*u;return n.a.createElement("li",{className:"cart__item"},n.a.createElement("img",{src:d,alt:i,className:"cart__picture",width:"100",height:"100"}),n.a.createElement("div",{className:"cart__info"},n.a.createElement("div",{className:"cart__row cart-row"},n.a.createElement("h3",{className:"cart__title"},n.a.createElement("a",{href:"#",className:"cart__link"},i)),n.a.createElement("div",{className:"cart__price-wrapper"},n.a.createElement("p",{className:"cart__price-total"},p.toLocaleString()," ₽"),u>1&&n.a.createElement("p",{className:"cart__price"},u.toLocaleString()," x ",s.toLocaleString()," ₽"))),n.a.createElement("div",{className:"cart__row cart-row"},n.a.createElement("button",{onClick:()=>a(c),className:"cart__delete cart-button  cart-button--in-text",type:"button"},"Удалить"),n.a.createElement(l,{ref:m,className:"cart__count-wrapper cart-row",startCount:u,onChange:e=>o(c,e)}))))};d.propTypes={goods:s.a.shape({id:s.a.string.isRequired,name:s.a.string.isRequired,price:s.a.number.isRequired,picture:s.a.string.isRequired,quantity:s.a.number.isRequired}).isRequired,onDeleteButtonClick:s.a.func.isRequired,onCounterChange:s.a.func.isRequired};var m=d;const p=e=>{const{allGoods:t,onFormSubmit:a}=e,o=Object(r.useRef)(null),c=Object(r.useRef)(null);return n.a.createElement("section",{className:"cart-addition container"},n.a.createElement("h2",{className:"cart-addition__title"},"Добавить товар"),n.a.createElement("form",{onSubmit:e=>{e.preventDefault(),a(c.current.value,+o.current.value)},action:"#",className:"cart-addition__form"},n.a.createElement("select",{ref:c,className:"cart-addition__select","aria-label":"Выбрать товар из списка"},t.map(e=>n.a.createElement("option",{key:e.id,value:e.id},e.name))),n.a.createElement(l,{ref:o,className:"cart-addition__count-wrapper"}),n.a.createElement("button",{className:"cart-addition__add cart-button cart-button--attention",type:"submit"},"Добавить")))};p.propTypes={allGoods:s.a.arrayOf(s.a.shape({id:s.a.string.isRequired,name:s.a.string.isRequired,price:s.a.number.isRequired,picture:s.a.string.isRequired})).isRequired,onFormSubmit:s.a.func.isRequired};var b=p,_=a(6);const f=(...e)=>Object.assign({},...e),G=(e,t,a,r,n=!1)=>{const o=e[t];return((e,t,a)=>[...e.slice(0,a),t,...e.slice(a+1)])(e,f(o,{[r]:a+(n?o[r]:0)}),t)},E=[{id:"1",name:"Видеокарта GIGABYTE GeForce GTX 1050 Ti OC 4G",price:12690,picture:"https://img.mvideo.ru/Pdb/30031080m.jpg"},{id:"2",name:"Видеокарта GIGABYTE GV-N2060WF2OC-6GD V2",price:29490,picture:"https://img.mvideo.ru/Pdb/30052540m.jpg"},{id:"3",name:"Видеокарта GIGABYTE GeForce RTX 2080 WINDFORCE OC 8G",price:5e4,picture:"https://img.mvideo.ru/Pdb/30040867m.jpg"},{id:"4",name:"Видеокарта Palit GeForce GT 710 2GB DDR3 Silent",price:1e4,picture:"https://img.mvideo.ru/Pdb/30030965m.jpg"},{id:"5",name:"Видеокарта GIGABYTE GeForce GTX 1080 TI WaterforceWB Xtreme Edition 1",price:25e3,picture:"https://img.mvideo.ru/Pdb/30031081m.jpg"}],g={allGoods:[],selectedGoods:[]},O={LOAD_GOODS:"LOAD_GOODS",CHANGE_SELECTED_GOODS:"CHANGE_SELECTED_GOODS"},y=e=>({type:O.LOAD_GOODS,payload:e}),h=e=>({type:O.CHANGE_SELECTED_GOODS,payload:e}),q=()=>(e,t,a)=>{e(y(E))},v={GOODS:["товар","товара","товаров"]};var R={CART:"CART"},N=a(4);const C=R.CART,S=e=>e[C].allGoods,j=e=>e[C].selectedGoods,D=Object(N.a)(j,e=>e.reduce((e,t)=>e+t.quantity,0)),w=Object(N.a)(j,e=>e.reduce((e,t)=>e+t.price*t.quantity,0)),T=Object(N.a)(j,(e,t)=>t,(e,t)=>e.findIndex(e=>e.id===t)),A=Object(N.a)(S,(e,t)=>t,(e,t)=>e.find(e=>e.id===t)),L=e=>{const{allGoods:t,onFormSubmit:a,selectedGoods:r,quantityGoods:o,totalGoods:c,addGoods:i,deleteGoods:s,changeGoodsCount:u}=e,l=((e,t)=>{const a=(e=Math.abs(e)%100)%10;return e>10&&e<20?t[2]:a>1&&a<5?t[1]:1===a?t[0]:t[2]})(o,v.GOODS);return n.a.createElement(n.a.Fragment,null,n.a.createElement(b,{allGoods:t,onFormSubmit:i}),n.a.createElement("section",{className:"cart container"},n.a.createElement("h2",{className:"visually-hidden"},"Товары в корзине"),n.a.createElement("form",{className:"cart__form",onSubmit:()=>{a(r.map(e=>({id:e.id,quantity:e.quantity,total:e.quantity*e.price})))}},n.a.createElement("ul",{className:"cart__list"},r.map(e=>n.a.createElement(m,{key:e.id,goods:e,onDeleteButtonClick:s,onCounterChange:u}))),n.a.createElement("div",{className:"cart__total"},n.a.createElement("div",{className:"cart__row cart__total-row cart-row"},n.a.createElement("p",{className:"cart__total-count"},"В корзине ",o.toLocaleString()," ",l),n.a.createElement("p",{className:"cart__total-price"},c.toLocaleString()," ₽")),n.a.createElement("button",{className:"cart__submit cart-button cart-button--attention",type:"submit",disabled:0===o},"Продолжить оформление")))))};L.propTypes={allGoods:s.a.arrayOf(s.a.shape({id:s.a.string.isRequired,name:s.a.string.isRequired,price:s.a.number.isRequired,picture:s.a.string.isRequired})).isRequired,selectedGoods:s.a.arrayOf(s.a.shape({id:s.a.string.isRequired,name:s.a.string.isRequired,price:s.a.number.isRequired,picture:s.a.string.isRequired,quantity:s.a.number.isRequired})).isRequired,quantityGoods:s.a.number.isRequired,totalGoods:s.a.number.isRequired,addGoods:s.a.func.isRequired,deleteGoods:s.a.func.isRequired,changeGoodsCount:s.a.func.isRequired,onFormSubmit:s.a.func.isRequired};var F=Object(_.b)((e,t)=>({allGoods:t.allGoods||S(e),selectedGoods:j(e),quantityGoods:D(e),totalGoods:w(e),state:e}),null,(e,t,a)=>{const{state:r,selectedGoods:n}=e,{dispatch:o}=t,c=n.slice().reverse();return f(e,t,a,{selectedGoods:c,addGoods:(e,t)=>{let a=[];const c=T(r,e);if(-1===c){const o=A(r,e);a=n.slice(),a.push((s=t,{id:(i=o).id,name:i.name,price:i.price,picture:i.picture,quantity:s}))}else a=G(n,c,t,"quantity",!0);var i,s;o(h(a))},deleteGoods:e=>{const t=T(r,e),a=((e,t)=>[...e.slice(0,t),...e.slice(t+1)])(n,t);o(h(a))},changeGoodsCount:(e,t)=>{const a=T(r,e),c=G(n,a,t,"quantity",!1);o(h(c))}})})(L),P=a(20),k=a.n(P);var x=a(3),B=Object(x.combineReducers)({[R.CART]:(e=g,t)=>{switch(t.type){case O.LOAD_GOODS:return f(e,{allGoods:t.payload});case O.CHANGE_SELECTED_GOODS:return f(e,{selectedGoods:t.payload})}return e}}),I=a(21),M=a(22);(()=>{const e=(()=>{const e=k.a.create({baseURL:"http://zjdog.mocklab.io",timeout:5e3});return e.interceptors.response.use(e=>e,e=>{throw e}),e})(),t=Object(x.createStore)(B,Object(I.composeWithDevTools)(Object(x.applyMiddleware)(M.a.withExtraArgument(e))));t.dispatch(q()),c.a.render(n.a.createElement(_.a,{store:t},n.a.createElement(F,{onFormSubmit:()=>{}})),document.querySelector("#root"))})()}});